# 25.3 IKSetupWizard Erweiterung

> **Commit-Message:** `feat(phase-25): 25.3 IKSetupWizard um FootLock erweitern`
> **Branch:** `feat/footlock-wizard`

---

## Ziel

IKSetupWizard erweitern, damit `FootLock` automatisch zum Player Prefab hinzugefügt wird. FootLock muss VOR FootIK als Component registriert werden.

## Datei

`Packages/Wiesenwischer.GameKit.CharacterController.IK/Editor/IKSetupWizard.cs`

## Änderungen

### FootLock VOR FootIK hinzufügen

Die Reihenfolge der `AddComponent`-Aufrufe bestimmt die Component-Reihenfolge auf dem GameObject, die wiederum die Registrierungsreihenfolge beim IKManager bestimmt.

**Neue Reihenfolge:**
1. IKManager (wie bisher)
2. **FootLock** (NEU — VOR FootIK!)
3. FootIK (wie bisher)
4. CameraTargetProvider (wie bisher)
5. LookAtIK (wie bisher)

```csharp
// === IKManager === (wie bisher)
var ikManager = modelGO.AddComponent<IKManager>();
// ... properties ...

// === FootLock === (NEU — VOR FootIK!)
var footLock = modelGO.AddComponent<FootLock>();
var footLockSo = new SerializedObject(footLock);
footLockSo.FindProperty("_playerController").objectReferenceValue = playerController;
footLockSo.FindProperty("_lockVelocityThreshold").floatValue = 0.05f;
footLockSo.FindProperty("_releaseVelocityThreshold").floatValue = 0.15f;
footLockSo.FindProperty("_stableFramesRequired").intValue = 2;
footLockSo.FindProperty("_releaseDuration").floatValue = 0.15f;
footLockSo.FindProperty("_maxLockDistance").floatValue = 0.3f;
footLockSo.FindProperty("_weight").floatValue = 1f;
footLockSo.ApplyModifiedProperties();

// === FootIK === (wie bisher)
var footIK = modelGO.AddComponent<FootIK>();
// ... properties ...
```

### Log-Ausgabe erweitern

```csharp
Debug.Log("[IKSetupWizard] IK-Komponenten erfolgreich hinzugefügt:");
Debug.Log("  - IKManager (Master-Weight=1, Airborne-Deaktivierung=true)");
Debug.Log("  - FootLock (Velocity-basiertes Foot Locking)");   // NEU
Debug.Log("  - FootIK (Raycast-basierte Fuß-Anpassung)");
Debug.Log("  - LookAtIK (Kamera-Blickrichtung)");
Debug.Log("  - CameraTargetProvider (Camera.main als LookAt-Ziel)");
```

### Using-Direktive

```csharp
using Wiesenwischer.GameKit.CharacterController.IK.Modules;  // bereits vorhanden (für FootIK)
```

`FootLock` liegt im selben Namespace wie `FootIK` — kein neues `using` nötig.

## Verifikation

- [ ] IKSetupWizard kompiliert fehlerfrei
- [ ] Menü "Setup IK on Player Prefab" ausführen → FootLock wird hinzugefügt
- [ ] FootLock erscheint im Inspector VOR FootIK
- [ ] Alle Default-Werte korrekt gesetzt (Thresholds, Duration, Distance)
- [ ] PlayerController-Referenz automatisch zugewiesen

## Erwartete Dateien

```
Packages/Wiesenwischer.GameKit.CharacterController.IK/
└── Editor/IKSetupWizard.cs  (MODIFIZIERT)
```

---

**Nächster Schritt:** [25.4 Unit Tests](25.4-unit-tests.md)
