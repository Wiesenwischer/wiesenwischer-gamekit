# 23.2 Config-Erweiterung (Crouch-Parameter)

> **Commit:** `feat(phase-23): 23.2 Crouch Config-Parameter`
> **Branch:** `feat/crouch-config`

---

## Ziel

10 neue Crouch-Parameter zu `ILocomotionConfig` und `LocomotionConfig` hinzufügen.

---

## Anweisungen

### 1. ILocomotionConfig erweitern

**Datei:** `Packages/Wiesenwischer.GameKit.CharacterController.Core/Runtime/Core/StateMachine/ILocomotionConfig.cs`

Neue Properties:

```csharp
// Crouching
float CrouchHeight { get; }
float StandingHeight { get; }
float CrouchSpeed { get; }
float CrouchAcceleration { get; }
float CrouchDeceleration { get; }
float CrouchTransitionDuration { get; }
float CrouchHeadClearanceMargin { get; }
bool CanJumpFromCrouch { get; }
bool CanSprintFromCrouch { get; }
float CrouchStepHeight { get; }
```

### 2. LocomotionConfig implementieren

**Datei:** `Packages/Wiesenwischer.GameKit.CharacterController.Core/Runtime/Core/Locomotion/LocomotionConfig.cs`

Neue SerializeFields:

```csharp
[Header("Crouching")]
[Tooltip("Capsule-Höhe beim Crouchen (m)")]
[SerializeField] private float _crouchHeight = 1.2f;

[Tooltip("Capsule-Höhe im Stehen (m) — Motor-Default")]
[SerializeField] private float _standingHeight = 2.0f;

[Tooltip("Bewegungsgeschwindigkeit beim Crouchen (m/s)")]
[SerializeField] private float _crouchSpeed = 2.5f;

[Tooltip("Beschleunigung beim Crouchen (m/s²)")]
[SerializeField] private float _crouchAcceleration = 8.0f;

[Tooltip("Verzögerung beim Crouchen (m/s²)")]
[SerializeField] private float _crouchDeceleration = 10.0f;

[Tooltip("Dauer der Capsule-Höhen-Transition (s)")]
[SerializeField] private float _crouchTransitionDuration = 0.25f;

[Tooltip("Sicherheitsabstand für Stand-Up-Check (m)")]
[SerializeField] private float _crouchHeadClearanceMargin = 0.1f;

[Tooltip("Ob aus dem Crouch gesprungen werden kann")]
[SerializeField] private bool _canJumpFromCrouch = true;

[Tooltip("Ob Sprint den Crouch automatisch beendet")]
[SerializeField] private bool _canSprintFromCrouch = true;

[Tooltip("Reduzierte Step-Höhe im Crouch (m), -1 = Motor-Default")]
[SerializeField] private float _crouchStepHeight = 0.2f;
```

Properties:

```csharp
public float CrouchHeight => _crouchHeight;
public float StandingHeight => _standingHeight;
public float CrouchSpeed => _crouchSpeed;
public float CrouchAcceleration => _crouchAcceleration;
public float CrouchDeceleration => _crouchDeceleration;
public float CrouchTransitionDuration => _crouchTransitionDuration;
public float CrouchHeadClearanceMargin => _crouchHeadClearanceMargin;
public bool CanJumpFromCrouch => _canJumpFromCrouch;
public bool CanSprintFromCrouch => _canSprintFromCrouch;
public float CrouchStepHeight => _crouchStepHeight;
```

### 3. LocomotionConfigEditor erweitern

**Datei:** `Packages/Wiesenwischer.GameKit.CharacterController.Core/Editor/LocomotionConfigEditor.cs`

Neue Felder und UI-Sektion für Crouching-Parameter. Analog zum bestehenden "Slope Sliding" Abschnitt:
- Foldout "Crouching"
- Alle 10 Parameter mit passenden Controls (Floats, Bools, Slider für CrouchHeight)

### 4. Test-MockConfigs aktualisieren

Alle Test-Dateien die `ILocomotionConfig` implementieren müssen die 10 neuen Properties bekommen:
- `SlidingTests.cs` → `MockConfig`
- `PlayerMovementStateMachineTests.cs` → `MockConfig`
- `DependencyValidationTests.cs` → `MockConfig`
- `MovementMotorTests.cs` → `MockConfig`
- `RollingTests.cs` → `MockConfig` (falls Phase 22 bereits implementiert)

Default-Werte gemäß Spec-Empfehlungen.

---

## Verifikation

- [ ] `ILocomotionConfig` hat 10 neue Crouch-Properties
- [ ] `LocomotionConfig` hat 10 neue SerializeFields mit korrekten Defaults
- [ ] `LocomotionConfigEditor` zeigt Crouching-Sektion
- [ ] Alle MockConfigs in Tests aktualisiert
- [ ] Kompilierung fehlerfrei

---

## Erwartete Dateien

```
Packages/.../Runtime/Core/StateMachine/ILocomotionConfig.cs   (GEÄNDERT)
Packages/.../Runtime/Core/Locomotion/LocomotionConfig.cs      (GEÄNDERT)
Packages/.../Editor/LocomotionConfigEditor.cs                 (GEÄNDERT)
Packages/.../Tests/Runtime/SlidingTests.cs                    (GEÄNDERT)
Packages/.../Tests/Runtime/StateMachine/...Tests.cs           (GEÄNDERT)
Packages/.../Tests/Runtime/DependencyValidationTests.cs       (GEÄNDERT)
Packages/.../Tests/Runtime/Movement/MovementMotorTests.cs     (GEÄNDERT)
```

---

**Nächster Schritt:** [23.3 Input-Integration](23.3-input-integration.md)
