# 26.1 Package-Struktur & Grundtypen

> **Commit:** `feat(phase-26): 26.1 Package-Struktur & Grundtypen`

---

## Ziel

Neues Package `Wiesenwischer.GameKit.Camera.Core` anlegen und die zentralen Datentypen definieren, die alle weiteren Camera-Systeme verwenden.

---

## Dateien

### 1. Package-Konfiguration

**`Packages/Wiesenwischer.GameKit.Camera.Core/package.json`**
```json
{
  "name": "wiesenwischer.gamekit.camera.core",
  "displayName": "GameKit Camera Core",
  "version": "0.1.0",
  "unity": "2022.3",
  "description": "AAA Third-Person Camera Core — Brain, State, Pivot Rig und Input Pipeline.",
  "dependencies": {
    "com.unity.inputsystem": "1.7.0"
  }
}
```

**Hinweis:** Keine Abhängigkeit zu CharacterController.Core (Entkopplung). Cinemachine-Abhängigkeit erst in Phase 28 (CinemachineDriver).

### 2. Assembly Definition

**`Runtime/Wiesenwischer.GameKit.Camera.Core.Runtime.asmdef`**
```json
{
  "name": "Wiesenwischer.GameKit.Camera.Core.Runtime",
  "rootNamespace": "Wiesenwischer.GameKit.Camera",
  "references": [
    "Unity.InputSystem"
  ],
  "includePlatforms": [],
  "excludePlatforms": []
}
```

### 3. CameraState

**`Runtime/Core/CameraState.cs`**

Repräsentiert den finalen Kamerazustand pro Frame. Immutable struct, wird von Behaviours per `ref` modifiziert.

```csharp
namespace Wiesenwischer.GameKit.Camera
{
    /// <summary>
    /// Deklarativer Kamerazustand pro Frame.
    /// Behaviours modifizieren diesen State nacheinander.
    /// </summary>
    public struct CameraState
    {
        /// <summary>Horizontale Rotation in Grad.</summary>
        public float Yaw;

        /// <summary>Vertikale Rotation in Grad (negativ = nach unten).</summary>
        public float Pitch;

        /// <summary>Abstand der Kamera zum Pivot-Punkt.</summary>
        public float Distance;

        /// <summary>Seitlicher Versatz (Over-Shoulder).</summary>
        public Vector3 ShoulderOffset;

        /// <summary>Field of View in Grad.</summary>
        public float Fov;

        /// <summary>Factory-Methode für Standard-State.</summary>
        public static CameraState Default => new CameraState
        {
            Yaw = 0f,
            Pitch = 0f,
            Distance = 5f,
            ShoulderOffset = Vector3.zero,
            Fov = 60f
        };
    }
}
```

### 4. CameraInputState

**`Runtime/Core/CameraInputState.cs`**

Gefilterter Input nach der Pipeline — nicht raw.

```csharp
namespace Wiesenwischer.GameKit.Camera
{
    /// <summary>
    /// Gefilterter Camera-Input pro Frame (nach Deadzone, Acceleration, Smoothing).
    /// </summary>
    public struct CameraInputState
    {
        /// <summary>Gefilterte horizontale Look-Rotation (Grad/s).</summary>
        public float LookX;

        /// <summary>Gefilterte vertikale Look-Rotation (Grad/s).</summary>
        public float LookY;

        /// <summary>Zoom-Input (-1 = rein, +1 = raus).</summary>
        public float Zoom;

        /// <summary>True wenn der Input von einem Gamepad kommt.</summary>
        public bool IsGamepad;
    }
}
```

### 5. CameraContext

**`Runtime/Core/CameraContext.cs`**

Runtime-Daten die pro Frame zwischen Systemen geteilt werden.

```csharp
namespace Wiesenwischer.GameKit.Camera
{
    /// <summary>
    /// Runtime-Kontext pro Frame. Transportiert Daten zwischen CameraBrain und Behaviours.
    /// </summary>
    public class CameraContext
    {
        /// <summary>Transform dem die Kamera folgt (Character Root).</summary>
        public Transform FollowTarget;

        /// <summary>Optionales LookAt-Ziel (z.B. für Lock-On).</summary>
        public Transform LookTarget;

        /// <summary>Gefilterter Input nach der Pipeline.</summary>
        public CameraInputState Input;

        /// <summary>Stabilisierte Follow-Position (von CameraAnchor).</summary>
        public Vector3 AnchorPosition;

        /// <summary>Frame DeltaTime.</summary>
        public float DeltaTime;
    }
}
```

### 6. ICameraBehaviour

**`Runtime/Core/ICameraBehaviour.cs`**

Extension Point — konkrete Implementierungen kommen in Phase 27.

```csharp
namespace Wiesenwischer.GameKit.Camera
{
    /// <summary>
    /// Modulares Camera-Verhalten. Modifiziert den CameraState basierend auf dem CameraContext.
    /// Behaviours werden vom CameraBrain in definierter Reihenfolge ausgeführt.
    /// </summary>
    public interface ICameraBehaviour
    {
        /// <summary>
        /// Wird der Behaviour aktuell evaluiert?
        /// CameraBrain überspringt deaktivierte Behaviours.
        /// </summary>
        bool IsActive { get; }

        /// <summary>
        /// Modifiziert den CameraState. Wird jeden Frame aufgerufen wenn IsActive = true.
        /// </summary>
        void UpdateState(ref CameraState state, CameraContext ctx);
    }
}
```

---

## Akzeptanzkriterien

- [ ] Package kompiliert fehlerfrei
- [ ] Namespace `Wiesenwischer.GameKit.Camera` für alle Typen
- [ ] CameraState.Default liefert sinnvolle Werte
- [ ] Keine Abhängigkeiten zu CharacterController-Packages
