# 22.2 RollTriggerMode Enum + Config-Erweiterung

> **Commit:** `feat(phase-22): 22.2 Roll Config-Parameter`
> **Branch:** `feat/roll-config`

---

## Ziel

`RollTriggerMode` Enum und Config-Parameter für das Landing Roll Feature erstellen.

---

## Anweisungen

### 1. RollTriggerMode Enum erstellen

**Datei:** `Packages/Wiesenwischer.GameKit.CharacterController.Core/Runtime/Core/Locomotion/RollTriggerMode.cs`

```csharp
namespace Wiesenwischer.GameKit.CharacterController.Locomotion
{
    /// <summary>
    /// Bestimmt wie der Landing Roll ausgelöst wird.
    /// </summary>
    public enum RollTriggerMode
    {
        /// <summary>Roll bei Movement-Input während Landung (Genshin-Style).</summary>
        MovementInput,

        /// <summary>Roll nur bei gehaltener Dodge/Roll-Taste.</summary>
        ButtonPress
    }
}
```

### 2. ILocomotionConfig erweitern

**Datei:** `Packages/Wiesenwischer.GameKit.CharacterController.Core/Runtime/Core/StateMachine/ILocomotionConfig.cs`

Neue Properties hinzufügen:

```csharp
// Landing Roll
RollTriggerMode RollTriggerMode { get; }
float RollSpeedModifier { get; }
bool RollEnabled { get; }
```

### 3. LocomotionConfig erweitern

**Datei:** `Packages/Wiesenwischer.GameKit.CharacterController.Core/Runtime/Core/Locomotion/LocomotionConfig.cs`

Neue SerializeFields im `Landing Roll` Abschnitt:

```csharp
[Header("Landing Roll")]
[Tooltip("Roll aktivieren/deaktivieren (false = immer HardLanding)")]
[SerializeField] private bool _rollEnabled = true;

[Tooltip("Trigger-Modus: MovementInput (automatisch) oder ButtonPress (Taste)")]
[SerializeField] private RollTriggerMode _rollTriggerMode = RollTriggerMode.MovementInput;

[Tooltip("Geschwindigkeits-Multiplikator relativ zu RunSpeed (0.5-2.0)")]
[Range(0.5f, 2.0f)]
[SerializeField] private float _rollSpeedModifier = 1.0f;
```

Properties:

```csharp
public bool RollEnabled => _rollEnabled;
public RollTriggerMode RollTriggerMode => _rollTriggerMode;
public float RollSpeedModifier => _rollSpeedModifier;
```

### 4. LocomotionConfigEditor erweitern

**Datei:** `Packages/Wiesenwischer.GameKit.CharacterController.Core/Editor/LocomotionConfigEditor.cs`

Neue Felder und UI-Sektion für Landing Roll Parameter. Analog zum bestehenden Slope Sliding Abschnitt:
- Foldout "Landing Roll"
- `RollEnabled` Toggle
- `RollTriggerMode` Enum-Popup
- `RollSpeedModifier` Slider

### 5. Test-MockConfig aktualisieren

Alle Test-Dateien die `ILocomotionConfig` implementieren müssen die neuen Properties bekommen:
- `SlidingTests.cs` → `MockConfig`
- `PlayerMovementStateMachineTests.cs` → `MockConfig`
- `DependencyValidationTests.cs` → `MockConfig`
- `MovementMotorTests.cs` → `MockConfig`

Default-Werte: `RollEnabled = true`, `RollTriggerMode = RollTriggerMode.MovementInput`, `RollSpeedModifier = 1.0f`

---

## Verifikation

- [ ] `RollTriggerMode` Enum kompiliert
- [ ] `ILocomotionConfig` hat 3 neue Properties
- [ ] `LocomotionConfig` hat 3 neue SerializeFields mit korrekten Defaults
- [ ] `LocomotionConfigEditor` zeigt Landing Roll Sektion
- [ ] Alle MockConfigs in Tests aktualisiert
- [ ] Kompilierung fehlerfrei

---

## Erwartete Dateien

```
Packages/.../Runtime/Core/Locomotion/RollTriggerMode.cs     (NEU)
Packages/.../Runtime/Core/StateMachine/ILocomotionConfig.cs  (GEÄNDERT)
Packages/.../Runtime/Core/Locomotion/LocomotionConfig.cs     (GEÄNDERT)
Packages/.../Editor/LocomotionConfigEditor.cs                (GEÄNDERT)
Packages/.../Tests/Runtime/SlidingTests.cs                   (GEÄNDERT)
Packages/.../Tests/Runtime/StateMachine/...Tests.cs          (GEÄNDERT)
Packages/.../Tests/Runtime/DependencyValidationTests.cs      (GEÄNDERT)
Packages/.../Tests/Runtime/Movement/MovementMotorTests.cs    (GEÄNDERT)
```

---

**Nächster Schritt:** [22.3 Animation-Integration](22.3-animation-integration.md)
