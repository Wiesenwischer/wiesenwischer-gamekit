# 22.2 RollTriggerMode Enum + Config-Erweiterung

> **Commit:** `feat(phase-22): 22.2 RollTriggerMode Enum und Config-Erweiterung`
> **Branch:** `feat/roll-config`

---

## Ziel

`RollTriggerMode`-Enum und drei neue Config-Parameter (`RollEnabled`, `RollTriggerMode`, `RollSpeedModifier`) zum Interface und zur ScriptableObject-Config hinzufügen.

## Anweisungen

### 1. RollTriggerMode Enum erstellen

**Datei:** `Packages/Wiesenwischer.GameKit.CharacterController.Core/Runtime/Core/StateMachine/RollTriggerMode.cs`

```csharp
namespace Wiesenwischer.GameKit.CharacterController.Core.StateMachine
{
    /// <summary>
    /// Bestimmt wie der Landing Roll ausgelöst wird.
    /// </summary>
    public enum RollTriggerMode
    {
        /// <summary>Roll bei Movement-Input während Landung (Genshin-Style).</summary>
        MovementInput = 0,

        /// <summary>Roll nur bei gehaltener Dodge/Roll-Taste.</summary>
        ButtonPress = 1
    }
}
```

### 2. ILocomotionConfig erweitern

**Datei:** `Packages/Wiesenwischer.GameKit.CharacterController.Core/Runtime/Core/StateMachine/ILocomotionConfig.cs`

Im Interface nach dem `Landing`-Block einfügen:

```csharp
// Landing Roll
/// <summary>Ob Landing Roll aktiviert ist (false = immer HardLanding).</summary>
bool RollEnabled { get; }

/// <summary>Trigger-Modus: MovementInput (automatisch) oder ButtonPress (Taste nötig).</summary>
RollTriggerMode RollTriggerMode { get; }

/// <summary>
/// Geschwindigkeits-Multiplikator für den Roll relativ zu RunSpeed.
/// Roll-Geschwindigkeit = RunSpeed × RollSpeedModifier.
/// </summary>
float RollSpeedModifier { get; }
```

### 3. LocomotionConfig erweitern

**Datei:** `Packages/Wiesenwischer.GameKit.CharacterController.Core/Runtime/Core/Locomotion/LocomotionConfig.cs`

Nach dem `[Header("Landing")]`-Block neue Felder einfügen:

```csharp
[Header("Landing Roll")]
[Tooltip("Roll aktivieren/deaktivieren (false = immer HardLanding)")]
[SerializeField] private bool _rollEnabled = true;

[Tooltip("Trigger-Modus: MovementInput (automatisch bei Stick-Input) oder ButtonPress (Taste nötig)")]
[SerializeField] private RollTriggerMode _rollTriggerMode = RollTriggerMode.MovementInput;

[Tooltip("Geschwindigkeits-Multiplikator relativ zu RunSpeed (1.0 = Run Speed)")]
[Range(0.5f, 2.0f)]
[SerializeField] private float _rollSpeedModifier = 1.0f;
```

Properties hinzufügen:

```csharp
public bool RollEnabled => _rollEnabled;
public RollTriggerMode RollTriggerMode => _rollTriggerMode;
public float RollSpeedModifier => _rollSpeedModifier;
```

## Verifikation

- [ ] `RollTriggerMode.cs` existiert im Core/Runtime/Core/StateMachine/
- [ ] `ILocomotionConfig` hat `RollEnabled`, `RollTriggerMode`, `RollSpeedModifier` Properties
- [ ] `LocomotionConfig` implementiert die neuen Properties
- [ ] Im Inspector sichtbar: "Landing Roll" Header mit 3 Feldern
- [ ] Default-Werte: RollEnabled=true, TriggerMode=MovementInput, SpeedModifier=1.0
- [ ] Kompiliert fehlerfrei

## Erwartete Dateien

```
Packages/Wiesenwischer.GameKit.CharacterController.Core/Runtime/Core/StateMachine/
├── RollTriggerMode.cs              ← NEU
├── ILocomotionConfig.cs            ← ERWEITERT
```

```
Packages/Wiesenwischer.GameKit.CharacterController.Core/Runtime/Core/Locomotion/
├── LocomotionConfig.cs             ← ERWEITERT
```

---

→ Nächster Schritt: [22.3 CharacterAnimationState.Roll + Animator-State](22.3-animation-integration.md)
