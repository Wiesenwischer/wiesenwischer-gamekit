# 22.1 Roll-Animation beschaffen + importieren

> **Commit:** `feat(phase-22): 22.1 Roll-Animation Asset`
> **Branch:** `feat/roll-animation-asset`

---

## Ziel

Eine passende Roll-Animation von Mixamo herunterladen, importieren und korrekt konfigurieren.

---

## Anweisungen

### 1. Animation beschaffen

Auf [Mixamo](https://www.mixamo.com/) nach einer Roll-Animation suchen:
- **Empfohlen:** "Rolling" oder "Combat Roll"
- **Alternativen:** "Dive Roll", "Forward Roll"
- **Format:** FBX for Unity
- **In Place:** Aktivieren (Root Motion wird nicht verwendet)
- **Dauer:** ~0.6-0.8 Sekunden (kurz, snappy)
- **Looping:** Nein (One-Shot-Animation)

### 2. Import in Unity

Datei ablegen unter:
```
Assets/Animations/Locomotion/Anim_Roll.fbx
```

### 3. Import-Settings konfigurieren

**Rig Tab:**
- Animation Type: Humanoid
- Avatar Definition: **Create From This Model**

**Animation Tab (Clip "Roll"):**
- Loop Time: **Nein** (One-Shot-Animation)
- Root Transform Rotation:
  - Bake Into Pose: **Ja**
  - Based Upon: **Body Orientation**
- Root Transform Position (Y):
  - Bake Into Pose: **Ja**
  - Based Upon: **Feet**
- Root Transform Position (XZ):
  - Bake Into Pose: **Ja**
  - Based Upon: **Original**

> **WICHTIG:** "Bake Into Pose" muss bei ALLEN Root Transform Settings aktiviert sein. Ohne Bake verschiebt die Animation die Root-Position → Mesh driftet vom Collider weg.

### 4. Animation-Event hinzufügen

In Unity's Animation Tab einen **Animation Event** erstellen:
- **Position:** ~80-90% der Animation (z.B. bei 0.5s einer 0.65s Animation)
- **Function:** `AllowExit`
- Dieses Event signalisiert dem State, dass er wechseln darf

> **Hinweis:** Das AllowExit-Event wird vom AnimatorParameterBridge empfangen und setzt `CanExitAnimation = true`. Falls die Animation kein Event hat, fällt der State auf `IsAnimationComplete()` als Fallback zurück.

### 5. Animation-Preview

- Animation in Unity Preview abspielen
- Prüfen: Character rollt vorwärts ohne Positionsdrift
- Prüfen: Animation endet in aufrechter Pose (bereit für Locomotion-Übergang)

---

## Verifikation

- [ ] `Anim_Roll.fbx` liegt unter `Assets/Animations/Locomotion/`
- [ ] Avatar Definition: "Create From This Model"
- [ ] Loop Time deaktiviert (One-Shot)
- [ ] Bake Into Pose bei allen Root Transform Settings
- [ ] Preview zeigt korrekte Roll-Bewegung (kein Positionsdrift)
- [ ] AllowExit Animation Event bei ~80-90% (optional, Fallback vorhanden)

---

## Erwartete Dateien

```
Assets/Animations/Locomotion/Anim_Roll.fbx          (Animation Asset)
Assets/Animations/Locomotion/Anim_Roll.fbx.meta      (Unity Meta)
```

---

**Nächster Schritt:** [22.2 Config-Erweiterung](22.2-config-erweiterung.md)
