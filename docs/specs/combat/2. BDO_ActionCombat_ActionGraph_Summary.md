
# BDO-Style Action Combat Architektur (GameKit / MMO) – Erweiterte Zusammenfassung

Diese Dokumentation fasst die bisher besprochenen Konzepte vollständig zusammen:

- BDO-inspiriertes Combat Design
- Root Motion vs Kinematic Controller
- Combat Architecture Layers
- Attack Timeline
- Input Buffering
- Action Graph (Core AAA Konzept)

Ziel:
Eine MMO-taugliche Combat-Architektur, die skalierbar bleibt und nicht später refactored werden muss.

---

# 1. Grundprinzipien des BDO Combat Feelings

Viele glauben, BDO Combat basiert auf schnellen Animationen oder Effekten.

Tatsächlich basiert das Feeling auf:

## Animation-driven Timing

Falsch:

Input -> Damage -> Animation

Richtig:

Input -> Combat System -> Animation Timeline -> Hit Window -> Damage

Die Animation definiert:

- Hit Timing
- Recovery
- Combo Windows

---

## Input Buffering

Spielerinputs werden gespeichert.

Wenn Spieler während einer Attack klickt:

- Input wird queued
- Wird automatisch ausgeführt sobald Combo Window offen ist.

Warum wichtig:

- Combat fühlt sich smooth an.
- Kein Frame-perfect Timing nötig.

---

## Animation Guided Movement

Wichtigste Klarstellung:

BDO ist NICHT klassisch Root Motion driven.

### Root Motion Driven (nicht empfohlen für MMO)

Animation bewegt Transform direkt.

Probleme:

- Networking schwierig
- Prediction schwierig
- MMO ungeeignet

---

### Animation Guided + Motor Driven

Animation gibt Movement Intent.

CharacterMotor setzt finale Position.

Animation -> Movement suggestion
Motor -> tatsächliche Bewegung

Optional (AAA Trick):

Root Motion Extraction:
Animation movement wird gelesen und als Impuls verwendet.

---

# 2. Combat Architecture Layering

INPUT
 ↓
CombatController (Brain)
 ↓
CharacterStateMachine (Body condition)
 ↓
Animation Layer (Visualisation)
 ↓
CharacterMotor (Movement)

Animator ist NICHT die Combat Logik.

---

# 3. Character State vs Combat State

## Character State

- Idle
- Moving
- Attacking
- Stunned

## Combat State

- Light1
- Light2
- Heavy
- Recovery

Warum trennen:

- Erweiterbarkeit
- Waffenwechsel
- Skills
- Networking Stabilität

---

# 4. Attack Timeline

Jede Attack besteht aus:

- Startup
- Active (Hit Window)
- Recovery
- Combo Window

Damage passiert nur im Hit Window.

---

# 5. Data Driven Attack Design

AttackData enthält:

- Animation
- hitStart / hitEnd
- comboWindowStart / comboWindowEnd
- forwardImpulse
- optionale Tags

Vorteile:

- Neue Weapons ohne Code Rewrite
- Balancing einfacher

---

# 6. Movement Integration

NICHT:

Animation bewegt Charakter.

SONDERN:

Animation Event -> motor.AddImpulse()

Warum:

- MMO Networking stabil
- Deterministisches Movement

---

# 7. Hit Detection

Empfohlen:

Nur während Hit Window:

- OverlapCapsule
- OverlapSphere

Nicht permanent Collider aktiv.

---

# 8. Combat Feel Essentials

Direkt implementieren:

- Forward impulse
- Rotation assist
- Hit stop (0.03–0.06 sec)
- Enemy hit reaction
- leichte camera shake

---

# 9. Action Graph – REAL BDO Combat Struktur

Viele implementieren Combos als:

Light1 -> Light2 -> Light3

Problem:

Bei Erweiterungen explodieren Transitionen.

---

## Action Graph Konzept

Combat ist ein gerichteter Graph.

Jede Attack ist ein Node.

[Light1]
   -> Light2
   -> Heavy
   -> Dodge

---

## Node Struktur

AttackNode
{
   animation
   phases
   transitions
}

---

## Transition Struktur

Transition
{
   inputType
   allowedTimeWindow
   requiredConditions
   targetNode
}

---

## Vorteile

- Skills hinzufügen ohne bestehende Logik zu ändern
- Cancels einfach integrierbar
- Directional Attacks möglich
- MMO Networking kompatibel

---

# 10. Minimaler Start Graph (Sword & Shield)

Idle -> Light1
Light1 -> Light2
Light2 -> Light3
Light1 -> Heavy

---

# 11. Wichtigste Designregel

Animator visualisiert nur.

Combat Graph entscheidet.

---

# NEXT STEP (Reminder)

Als nächstes:

Combat Tags / Combat Layers Deep Dive
